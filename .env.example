# ContextCleanse Environment Configuration
# Copy this file to .env and configure for your environment

# ==============================================
# ENVIRONMENT CONFIGURATION
# ==============================================
ENVIRONMENT=development
NODE_ENV=development

# ==============================================
# DATABASE CONFIGURATION (PostgreSQL)
# ==============================================
POSTGRES_DB=contextcleanse
POSTGRES_USER=contextcleanse
POSTGRES_PASSWORD=contextcleanse_password
POSTGRES_AUTH_METHOD=trust
POSTGRES_PORT=5432

# Database Performance Tuning
POSTGRES_MAX_CONNECTIONS=200
POSTGRES_SHARED_BUFFERS=512MB
POSTGRES_EFFECTIVE_CACHE=2GB
POSTGRES_LOG_STATEMENT=none

# Database Resource Limits
POSTGRES_MEMORY_LIMIT=2G
POSTGRES_CPU_LIMIT=1
POSTGRES_MEMORY_RESERVATION=1G
POSTGRES_CPU_RESERVATION=0.5

# Database Volume Path (for persistent storage)
POSTGRES_DATA_PATH=./volumes/postgres

# ==============================================
# BACKEND CONFIGURATION (FastAPI)
# ==============================================
BACKEND_PORT=8000
BACKEND_BUILD_TARGET=development
BACKEND_VOLUME_TYPE=volume
BACKEND_VOLUME_SOURCE=backend_logs

# Backend Resource Limits
BACKEND_MEMORY_LIMIT=4G
BACKEND_CPU_LIMIT=2
BACKEND_MEMORY_RESERVATION=2G
BACKEND_CPU_RESERVATION=1

# Backend Security (set to true for production)
BACKEND_READ_ONLY=false

# Backend Volume Paths
BACKEND_LOGS_PATH=./volumes/backend/logs

# ==============================================
# FRONTEND CONFIGURATION (Next.js)
# ==============================================
FRONTEND_PORT=3000
FRONTEND_BUILD_TARGET=development
FRONTEND_VOLUME_TYPE=bind
FRONTEND_VOLUME_SOURCE=./frontend

# Next.js Optimization
NEXT_DEBUG_CACHE=1
WATCHPACK_POLLING=false
FAST_REFRESH=true

# Frontend Resource Limits
FRONTEND_MEMORY_LIMIT=2G
FRONTEND_CPU_LIMIT=1
FRONTEND_MEMORY_RESERVATION=1G
FRONTEND_CPU_RESERVATION=0.5

# Frontend Security (set to true for production)
FRONTEND_READ_ONLY=false
FRONTEND_HEALTH_START_PERIOD=15s

# API URLs
NEXT_PUBLIC_API_URL=http://localhost:8000

# ==============================================
# AUTHENTICATION CONFIGURATION
# ==============================================
# NextAuth Configuration
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=contextcleanse-secure-jwt-secret-2024-change-in-production

# Google OAuth (Get from Google Cloud Console)
AUTH_GOOGLE_ID=your_google_client_id_here
AUTH_GOOGLE_SECRET=your_google_client_secret_here

# reCAPTCHA Configuration (Get from Google reCAPTCHA)
NEXT_PUBLIC_RECAPTCHA_SITE_KEY=your_recaptcha_site_key_here
RECAPTCHA_SECRET_KEY=your_recaptcha_secret_key_here

# ==============================================
# REDIS CONFIGURATION
# ==============================================
REDIS_PORT=6379
REDIS_MAX_MEMORY=256mb

# Redis Resource Limits
REDIS_MEMORY_LIMIT=512M
REDIS_CPU_LIMIT=0.5
REDIS_MEMORY_RESERVATION=256M
REDIS_CPU_RESERVATION=0.25

# Redis Volume Path
REDIS_DATA_PATH=./volumes/redis

# ==============================================
# OLLAMA CONFIGURATION
# ==============================================
NEXT_PUBLIC_OLLAMA_HOST=host.docker.internal:11434

# ==============================================
# REVERSE PROXY CONFIGURATION (Production)
# ==============================================
# Traefik Labels
TRAEFIK_ENABLE=true
TRAEFIK_TLS=false
TRAEFIK_CERT_RESOLVER=letsencrypt
FRONTEND_DOMAIN=localhost

# Nginx Configuration
NGINX_HTTP_PORT=80
NGINX_HTTPS_PORT=443

# ==============================================
# NETWORK CONFIGURATION
# ==============================================
NETWORK_SUBNET=172.20.0.0/16
NETWORK_GATEWAY=172.20.0.1

# ==============================================
# PRODUCTION ENVIRONMENT OVERRIDES
# ==============================================
# Uncomment and modify these for production deployment

# ENVIRONMENT=production
# NODE_ENV=production
# FRONTEND_BUILD_TARGET=production
# BACKEND_BUILD_TARGET=production

# Production Security
# FRONTEND_READ_ONLY=true
# BACKEND_READ_ONLY=true

# Production Performance
# POSTGRES_MAX_CONNECTIONS=100
# POSTGRES_SHARED_BUFFERS=1GB
# POSTGRES_EFFECTIVE_CACHE=4GB

# Production Domain
# FRONTEND_DOMAIN=yourdomain.com
# NEXTAUTH_URL=https://yourdomain.com
# NEXT_PUBLIC_API_URL=https://api.yourdomain.com

# Production SSL
# TRAEFIK_TLS=true

# ==============================================
# DEVELOPMENT ENVIRONMENT OVERRIDES
# ==============================================
# These are already set as defaults above

# Development Performance (optional overrides)
# POSTGRES_MAX_CONNECTIONS=50
# POSTGRES_SHARED_BUFFERS=256MB
# REDIS_MAX_MEMORY=128mb

# Development Security (keep disabled)
# FRONTEND_READ_ONLY=false
# BACKEND_READ_ONLY=false

# ==============================================
# VOLUME CONFIGURATION
# ==============================================
# Custom volume paths (optional)
# POSTGRES_DATA_PATH=/custom/path/postgres
# REDIS_DATA_PATH=/custom/path/redis
# BACKEND_LOGS_PATH=/custom/path/logs

# ==============================================
# DEBUGGING AND MONITORING
# ==============================================
# Enable debug mode for specific services
# POSTGRES_LOG_STATEMENT=all
# NEXT_DEBUG_CACHE=1

# Health check customization
# FRONTEND_HEALTH_START_PERIOD=30s

# ==============================================
# DOCKER BUILD CONFIGURATION
# ==============================================
# Build optimization flags (automatically set by docker-compose)
# BUILDKIT_INLINE_CACHE=1
# DOCKER_BUILDKIT=1